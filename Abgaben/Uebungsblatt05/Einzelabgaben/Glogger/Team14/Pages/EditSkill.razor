@page "/skill/edit"
@page "/skill/edit/{Id}"

@using Team14.Data
@inject ISkillService SkillService


@if (Id != null)
{
    int id = Int32.Parse(Id);
    if (SkillService.GetSkill(id) != null)
    {
        <h3> Skill bearbeiten</h3>
        <EditForm Model="@skill" OnValidSubmit="@UpdateSkill">
            <div class="form-group">
                <label asp-for="Name" class="control-label">Name</label>
                <input asp-for="Name" class="form-control" @bind="@skill.Name" />
            </div>
            <div class="form-group">
                <label asp-for="Skill.Type" class="control-label">Kategorie</label>
                <InputSelect @bind-Value="@skill.Type">
                    @foreach (var value in Enum.GetValues(typeof(Skill.SkillType)))
                            {
        <option value="@value">@value</option>}
                </InputSelect>
            </div>

            <a href="skill" class="btn btn-success"> Submit </a>

        </EditForm>
    }

}

@code
{
    [Parameter]
    public string Id { get; set; }
    private Skill skill;
    private Skill urlSkill;

    protected override void OnInitialized()
    {
        urlSkill = SkillService.GetSkill(Int32.Parse(Id));
        if(urlSkill == null)
        {

        }
        else {

            skill = new Skill
            {
                Name = urlSkill.Name,
                Type = urlSkill.Type
            };
        }
    }
    protected void UpdateSkill()
    {
        SkillService.UpdateSkill(skill);
    }

}