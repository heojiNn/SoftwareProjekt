@page "/skill"
@page "/skill/index"

@inject NavigationManager NavigationManager
@using Team14.Data
@using Team14.Interfaces
@inject ISkillService SkillService


<table>
    <tr>
        <th>ID</th>
        <th>Skillname</th>
        <th>Skilltyp</th>
        <th></th>
        <th></th>
    </tr>

    @if (skills == null)
    {
        <p>
            keine Skills vorhanden!
        </p>
    }
    else
    {
        @foreach (var skill in skills)
        {
            <tr>
                <td>@skill.iD</td>
                <td>@skill.Name</td>
                <td>@skill.Kategorisierung</td>
                <td>
                    <a class="btn btn-info" href="skill/edit/@skill.iD">Edit</a>
                </td>
                <td>
                    <a class="btn btn-danger" @onclick="() => DeleteArticle(skill.iD)">Delete</a>
                </td>
            </tr>
        }
    }
</table>
<a class="btn btn-success" href="skill/edit/new">Add</a>


@code {
    IEnumerable<Skill> skills;
    protected override void OnInitialized()
    {
        skills = SkillService.GetAllSkills();
        if (skills.Count() == 0)
            skills = null;
    }

    protected void DeleteArticle(int id)
    {
        SkillService.DeleteSkill(id);

        NavigationManager.NavigateTo("Skill", true);
    }
}
